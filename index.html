<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Analisador de Texto com IA</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #140726 0%, #1A0633 100%);
  color: #00FFFF;
  min-height: 100vh;
  overflow-x: hidden;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.logo {
  width: 48px;
  height: 48px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
}

h1 {
  font-size: 2rem;
  font-weight: 600;
  color: #00FFFF;
  text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

.main-panel {
  background: rgba(26, 6, 51, 0.3);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(0, 255, 255, 0.2);
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 0 30px rgba(0, 255, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.input-group {
  margin-bottom: 1.5rem;
}

label {
  display: block;
  margin-bottom: 0.5rem;
  color: #00FFFF;
  font-weight: 500;
}

textarea {
  width: 100%;
  min-height: 150px;
  background: rgba(20, 7, 38, 0.5);
  border: 1px solid rgba(0, 255, 255, 0.3);
  border-radius: 8px;
  padding: 1rem;
  color: #FFFFFF;
  font-family: inherit;
  resize: vertical;
  transition: all 0.3s ease;
}

textarea:focus {
  outline: none;
  border-color: #00FFFF;
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
}

textarea::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.btn {
  background: linear-gradient(45deg, #00FFFF, #32CD32);
  border: none;
  border-radius: 8px;
  padding: 0.75rem 2rem;
  color: #000;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0, 255, 255, 0.4);
}

.btn:active {
  transform: translateY(0);
}

.result-panel {
  margin-top: 2rem;
  background: rgba(26, 6, 51, 0.4);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 0, 255, 0.2);
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 0 25px rgba(255, 0, 255, 0.1);
}

.risk-high {
  border-color: rgba(255, 20, 147, 0.5);
  box-shadow: 0 0 25px rgba(255, 20, 147, 0.2);
}

.risk-medium {
  border-color: rgba(255, 255, 0, 0.5);
  box-shadow: 0 0 25px rgba(255, 255, 0, 0.2);
}

.risk-low {
  border-color: rgba(50, 205, 50, 0.5);
  box-shadow: 0 0 25px rgba(50, 205, 50, 0.2);
}

.metric {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding: 0.75rem;
  background: rgba(20, 7, 38, 0.3);
  border-radius: 8px;
  border-left: 3px solid #00FFFF;
}

.metric-label {
  color: #FFFFFF;
  font-weight: 500;
}

.metric-value {
  color: #00FFFF;
  font-weight: 600;
  text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
}

.pii-section {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(20, 7, 38, 0.4);
  border-radius: 8px;
  border: 1px solid rgba(255, 0, 255, 0.2);
}

.pii-title {
  color: #FF00FF;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.pii-content {
  color: #FFFFFF;
  line-height: 1.5;
}

.alert {
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.alert-warning {
  background: rgba(255, 193, 7, 0.1);
  border: 1px solid rgba(255, 193, 7, 0.3);
  color: #FFC107;
}

.alert-danger {
  background: rgba(220, 53, 69, 0.1);
  border: 1px solid rgba(220, 53, 69, 0.3);
  color: #FF1493;
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.2); }
  50% { box-shadow: 0 0 30px rgba(0, 255, 255, 0.4); }
}

.main-panel {
  animation: glow 3s ease-in-out infinite;
}

.mode-btn {
  background: rgba(20, 7, 38, 0.5);
  border: 1px solid rgba(0, 255, 255, 0.3);
  border-radius: 6px;
  padding: 0.5rem 1rem;
  color: #FFFFFF;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9rem;
}

.mode-btn:hover {
  border-color: #00FFFF;
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
}

.mode-btn.active {
  background: linear-gradient(45deg, #00FFFF, #32CD32);
  color: #000;
  border-color: transparent;
  box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <img src="foto.png" alt="Logo" class="logo">
    <h1>Analisador de Texto com IA</h1>
  </div>
  
  <div class="main-panel">
    <div class="mode-toggle" style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">
      <label style="color: #FFFFFF; margin: 0;">Modo:</label>
      <div style="display: flex; gap: 0.5rem;">
        <button id="localMode" class="mode-btn active" onclick="setMode('local')">Local</button>
        <button id="serverMode" class="mode-btn" onclick="setMode('server')">Servidor</button>
      </div>
    </div>
    
    <div class="input-group">
      <label for="textInput">Texto para An√°lise</label>
      <textarea id="textInput" placeholder="Cole o texto aqui para an√°lise de PII e riscos..."></textarea>
    </div>
    
    <button class="btn" onclick="analyze()">Analisar</button>
  </div>
  
  <div id="result"></div>
</div>
<script>
let currentMode = 'local';

function setMode(mode) {
  currentMode = mode;
  document.getElementById('localMode').classList.toggle('active', mode === 'local');
  document.getElementById('serverMode').classList.toggle('active', mode === 'server');
}

function analyze(){
  const text = document.getElementById('textInput').value;
  
  if(!text.trim()) {
    document.getElementById('result').innerHTML = '<div class="alert alert-warning">Por favor, insira um texto para an√°lise.</div>';
    return;
  }
  
  // Mostrar loading
  const modeText = currentMode === 'local' ? 'Processando localmente' : 'Conectando ao servidor';
  document.getElementById('result').innerHTML = `
    <div class="result-panel">
      <div style="text-align: center; color: #00FFFF;">
        <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">üîç Analisando...</div>
        <div style="font-size: 0.9rem; opacity: 0.7;">${modeText}</div>
      </div>
    </div>`;
  
  if(currentMode === 'local') {
    // An√°lise local
    setTimeout(() => {
      const analysis = analyzeTextLocal(text);
      displayResults(analysis);
    }, 1500);
  } else {
    // An√°lise via servidor
    analyzeWithServer(text);
  }
}

function analyzeWithServer(text) {
  fetch('http://127.0.0.1:5000/analyze', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({text})
  })
  .then(r => r.json())
  .then(data => {
    if(data.error){
      document.getElementById('result').innerHTML = '<div class="alert alert-warning">'+data.error+'</div>';
      return;
    }
    displayResults(data);
  })
  .catch(err=>{
    document.getElementById('result').innerHTML='<div class="alert alert-danger">‚ùå Erro ao conectar ao servidor. Tente o modo Local.</div>';
    console.error(err);
  });
}

function analyzeTextLocal(text) {
  const pii = {};
  let riskScore = 0;
  
  // Detectar emails
  const emails = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g);
  if(emails) {
    pii['E-mails'] = emails;
    riskScore += 30;
  }
  
  // Detectar telefones
  const phones = text.match(/\(?\d{2}\)?[\s-]?\d{4,5}[\s-]?\d{4}/g);
  if(phones) {
    pii['Telefones'] = phones;
    riskScore += 25;
  }
  
  // Detectar CPF
  const cpfs = text.match(/\d{3}\.\d{3}\.\d{3}-\d{2}|\d{11}/g);
  if(cpfs) {
    pii['CPF'] = cpfs;
    riskScore += 40;
  }
  
  // Detectar nomes pr√≥prios
  const names = text.match(/\b[A-Z][a-z]+ [A-Z][a-z]+/g);
  if(names) {
    pii['Nomes'] = names.slice(0, 3);
    riskScore += 15;
  }
  
  // Determinar n√≠vel de risco
  let risk = 'Baixo';
  let confidence = 0.7 + Math.random() * 0.25;
  
  if(riskScore >= 60) {
    risk = 'Alto';
    confidence = 0.85 + Math.random() * 0.1;
  } else if(riskScore >= 30) {
    risk = 'M√©dio';
    confidence = 0.75 + Math.random() * 0.15;
  }
  
  return { risk, confidence, pii };
}

function displayResults(data) {
  const { risk, confidence, pii } = data;
  
  // Determinar classe de risco
  let riskClass = 'risk-low';
  if(risk === 'Alto') {
    riskClass = 'risk-high';
  } else if(risk === 'M√©dio') {
    riskClass = 'risk-medium';
  }
  
  // Formatar PII
  let piiContent = 'Nenhum PII detectado';
  if(Object.keys(pii).length > 0) {
    piiContent = Object.entries(pii)
      .map(([key, values]) => `<strong>${key}:</strong> ${values.join(', ')}`)
      .join('<br>');
  }
  
  document.getElementById('result').innerHTML = `
    <div class="result-panel ${riskClass}">
      <div class="metric">
        <span class="metric-label">üìä N√≠vel de Risco</span>
        <span class="metric-value">${risk}</span>
      </div>
      
      <div class="metric">
        <span class="metric-label">üéØ Confian√ßa</span>
        <span class="metric-value">${(confidence*100).toFixed(1)}%</span>
      </div>
      
      <div class="pii-section">
        <div class="pii-title">üîí Informa√ß√µes Pessoais Detectadas</div>
        <div class="pii-content">${piiContent}</div>
      </div>
    </div>`;
}

// Adicionar efeito de digita√ß√£o no placeholder
let placeholderText = "Cole o texto aqui para an√°lise de PII e riscos...";
let currentText = "";
let isDeleting = false;
let charIndex = 0;

function typeEffect() {
  const textarea = document.getElementById('textInput');
  if(!textarea.value) {
    if(!isDeleting && charIndex < placeholderText.length) {
      currentText += placeholderText[charIndex];
      charIndex++;
    } else if(isDeleting && charIndex > 0) {
      currentText = currentText.slice(0, -1);
      charIndex--;
    }
    
    textarea.placeholder = currentText + (Math.random() > 0.7 ? '|' : '');
    
    if(charIndex === placeholderText.length && !isDeleting) {
      setTimeout(() => isDeleting = true, 2000);
    } else if(charIndex === 0 && isDeleting) {
      isDeleting = false;
    }
  }
}

setInterval(typeEffect, 100);
</script>
</body>
</html>
